(this.webpackJsonpcalculator=this.webpackJsonpcalculator||[]).push([[0],{12:function(e,t,n){e.exports={input:"Input_input__TRnYi",topLine:"Input_topLine__3GNZu",rightLine:"Input_rightLine__20Wr-",numbersInputs:"Input_numbersInputs__fFy6X",button:"Input_button__1-Hk5",invert:"Input_invert__ydKL6"}},13:function(e,t,n){e.exports={app__wrapper:"App_app__wrapper__2hZuJ",app:"App_app__2jjf2",app__background:"App_app__background__2hu6X",app__container:"App_app__container__2nXwl"}},15:function(e,t,n){e.exports={output:"Output_output__1fJgL",error:"Output_error__1O_Kj",input:"Output_input__3VUJf"}},29:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(17),c=n.n(i),u=(n(29),n(9)),o=n(1),s=n(11),l=n(23),p=n(13),f=n.n(p),h=n(24),O=n.n(h),b=n(12),m=n.n(b),v=n(2),d=function(e){var t=e.symbol,n=e.func,r=e.isInvert;return Object(v.jsx)("div",{"data-symbol":t,className:O()(m.a.button,Object(u.a)({},m.a.invert,r)),onClick:function(e){return n(e.currentTarget.dataset.symbol)},children:t})},j=function(e){return Object(v.jsx)(d,Object(o.a)({},e),e.symbol)},y=function(e){var t=e.topLineBlockOpers,n=e.rightColumnBlockOpers,r=e.numbersInputsBlockOpers;return Object(v.jsxs)("div",{className:m.a.input,children:[Object(v.jsx)("div",{className:m.a.topLine,children:t.map(j)}),Object(v.jsx)("div",{className:m.a.rightLine,children:n.map(j)}),Object(v.jsx)("div",{className:m.a.numbersInputs,children:r.map(j)})]})},x=n(15),g=n.n(x),E=function(e){var t=e.expression,n=e.inputVal,r=e.error,a=e.onInputChange;return Object(v.jsxs)("div",{className:g.a.output,children:[Object(v.jsx)("div",{className:g.a.expression,children:t}),Object(v.jsx)("input",{className:g.a.input,value:n,onChange:a}),Object(v.jsx)("span",{className:g.a.error,children:r})]})},w=n(3),k=n(4),_=n(6),N=n(5),A=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(w.a)(this,e),this.symbol=t,this.exSymbols=n,this.symbol=t,this.exSymbols=n}return Object(k.a)(e,[{key:"getSymbol",value:function(){return this.symbol}},{key:"getExSymbols",value:function(){return this.exSymbols}},{key:"getMathCorrectSymbol",value:function(){return this.symbol}},{key:"checkIsOperation",value:function(e){return this.symbol===e||this.exSymbols.includes(e)}}]),e}(),I=function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;return Object(w.a)(this,n),(a=t.call(this,e)).symbol=e,a.type=r,a.type=r,a}return Object(k.a)(n,[{key:"getType",value:function(){return this.type}}]),n}(A),P=new I(")","close"),B={openParenthesis:new I("(","open"),closeParenthesis:P},S=n(10),C={changeItemsOnItem:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n+2;return[].concat(Object(S.a)(e.slice(0,n+1)),[t],Object(S.a)(e.slice(r)))}},L=function(e){return"number"===typeof e&&isFinite(e)},R=function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(e,r,a){var i,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Object(w.a)(this,n),(i=t.call(this,r,c)).operationName=e,i.symbol=r,i.priority=a,i.exSymbols=c,i.canBePlacedAfterOtherOperation=!1,i.canBePlacedBeforeOtherOperation=!1,i.hasOwnFullCalculateFunc=!1,i.operationName=e,i.priority=a,i}return Object(k.a)(n,[{key:"parseCheck",value:function(e,t){this.argumentsNotFound(e,t)}},{key:"getRightNum",value:function(e,t){var n=t+1,r=n<e.length&&L(e[n]);return r?{rightNum:e[n],isExistRightNum:r}:{isExistRightNum:r}}},{key:"getLeftNum",value:function(e,t){var n=t-1,r=n>=0&&L(e[n]);return r?{leftNum:e[n],isExistLeftNum:r}:{isExistLeftNum:r}}},{key:"getPrevExprElem",value:function(e,t){var n=t-1,r=n>=0;return r?{prevExprElem:e[n],isExistPrevExprElem:r}:{isExistPrevExprElem:r}}},{key:"getNextExprElem",value:function(e,t){var n=t+1,r=n<e.length;return r?{nextExprElem:e[n],isExistNextExprElem:r}:{isExistNextExprElem:r}}},{key:"argumentsNotFound",value:function(e,t){var r=this.getPrevExprElem(e,t),a=r.prevExprElem,i=r.isExistPrevExprElem,c=this.getNextExprElem(e,t),u=c.nextExprElem,o=c.isExistNextExprElem;if(!i&&!o||!(L(a)||this.canBePlacedAfterOtherOperation||o&&u instanceof n&&u.canBePlacedBeforeOtherOperation||L(u)||this.canBePlacedBeforeOtherOperation||o&&u instanceof n&&u.canBePlacedAfterOtherOperation))throw new Error("Arguments for ".concat(this.operationName," not found"))}},{key:"stepByStepOperations",value:function(e,t){var r=this.getPrevExprElem(e,t),a=r.prevExprElem,i=r.isExistPrevExprElem,c=this.getNextExprElem(e,t),u=c.nextExprElem,o=c.isExistNextExprElem;if(i&&a instanceof n&&!a.canBePlacedBeforeOtherOperation&&!this.canBePlacedAfterOtherOperation||o&&u instanceof n&&!u.canBePlacedAfterOtherOperation&&!this.canBePlacedBeforeOtherOperation)throw new Error("The ".concat(this.operationName," cannot be performed before other operation"))}},{key:"numOnRightMustBe",value:function(e){if(!e)throw new Error("The ".concat(this.operationName," operation need an argument on the right"))}},{key:"numOnRightMustNotBe",value:function(e){if(e)throw new Error("The ".concat(this.operationName," operation mustn't has a number on the right"))}},{key:"exprOnLeftMustNotBeNum",value:function(e){if(e)throw new Error("The ".concat(this.operationName," operation mustn't has any number on the left"))}},{key:"calculate",value:function(e){return[]}}]),n}(A),F=n(8),T=n(7),M={addition:new(function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculate",value:function(e){return[(null!==e.leftArg?e.leftArg:0)+(null!==e.rightArg?e.rightArg:0)]}},{key:"parseCheck",value:function(e,t){Object(F.a)(Object(T.a)(n.prototype),"parseCheck",this).call(this,e,t),this.stepByStepOperations(e,t)}}]),n}(R))("addition","+",0),division:new(function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculate",value:function(e){return[(null!==e.leftArg?e.leftArg:1)/(null!==e.rightArg?e.rightArg:1)]}},{key:"parseCheck",value:function(e,t){Object(F.a)(Object(T.a)(n.prototype),"parseCheck",this).call(this,e,t);var r=this.getRightNum(e,t).rightNum;this.stepByStepOperations(e,t),L(r)&&this.divideByZero(r)}},{key:"divideByZero",value:function(e){if(0===e)throw new Error("You cannot divide by zero")}}]),n}(R))("division","/",1),multiplication:new(function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculate",value:function(e){return[(null!==e.leftArg?e.leftArg:1)*(null!==e.rightArg?e.rightArg:1)]}},{key:"parseCheck",value:function(e,t){Object(F.a)(Object(T.a)(n.prototype),"parseCheck",this).call(this,e,t),this.stepByStepOperations(e,t)}}]),n}(R))("multiplication","\xd7",1,["*"]),percent:new(function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(w.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).canBePlacedBeforeOtherOperation=!0,e.hasOwnFullCalculateFunc=!0,e}return Object(k.a)(n,[{key:"parseCheck",value:function(e,t){Object(F.a)(Object(T.a)(n.prototype),"parseCheck",this).call(this,e,t);var r=this.getRightNum(e,t).isExistRightNum;this.numOnRightMustNotBe(r)}},{key:"calculate",value:function(e){var t=e.expr,n=e.calculateExpr,r=e.operationIndex;if(!(1<=r&&r<=3)){var a=r-2,i=[n({expr:t.slice(0,a),index:0})].concat(Object(S.a)(t.slice(a)));return this.calculate({expr:i,calculateExpr:n,operationIndex:3})}var c=r-3,u=c>=0?t[c]:1,o=r-1,s=t[o];if(L(u)&&L(s)){var l=u/100*s;return C.changeItemsOnItem(t,l,o-1,r+1)}throw new Error("Some of percent operation arguments is not a number")}}]),n}(R))("percent","%",2),squareRoot:new(function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(){var e;Object(w.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).canBePlacedAfterOtherOperation=!0,e.canBePlacedBeforeOtherOperation=!0,e}return Object(k.a)(n,[{key:"calculate",value:function(e){var t=null!==e.leftArg?e.leftArg:1,n=null!==e.rightArg?e.rightArg:1;return[t*Math.pow(n,.5)]}},{key:"parseCheck",value:function(e,t){Object(F.a)(Object(T.a)(n.prototype),"parseCheck",this).call(this,e,t);var r=this.getLeftNum(e,t).isExistLeftNum,a=this.getRightNum(e,t).isExistRightNum;this.numOnRightMustBe(a),this.exprOnLeftMustNotBeNum(r)}}]),n}(R))("square root","\u221a",2),subtraction:new(function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculate",value:function(e){return[(null!==e.leftArg?e.leftArg:0)-(null!==e.rightArg?e.rightArg:0)]}},{key:"parseCheck",value:function(e,t){Object(F.a)(Object(T.a)(n.prototype),"parseCheck",this).call(this,e,t),this.stepByStepOperations(e,t)}}]),n}(R))("subtraction","-",0)},V=function(e){return Object.values(M).find((function(t){return t.checkIsOperation(e)}))},Z=new A("8"),D=new A("5"),J=new A("4"),U=new A("9"),X=new A("1"),Y=new A("7"),q=new A("6"),z=new A("3"),K=new A("2"),G={zero:new A("0"),one:X,two:K,three:z,four:J,five:D,six:q,seven:Y,eight:Z,nine:U,doubleZero:new A("00"),comma:new(function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(){return Object(w.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"getMathCorrectSymbol",value:function(){return this.exSymbols[0]}}]),n}(A))(",",["."])},H=function(e){return Object.values(G).find((function(t){return t.checkIsOperation(e)}))},W=function(e){return Object.values(B).find((function(t){return t.checkIsOperation(e)}))},Q=function(e,t){var n="Some parenthesis pair not found";switch(t){case"result":if(0!==e)throw new Error(n);break;case"onClose":if(!(e>0))throw new Error(n);break;default:if(e<0)throw new Error(n)}};function $(e){return!!e.find((function(e){return e instanceof Array?$(e):"string"===typeof e}))}var ee=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=t[n];if(!i){if(Q(r,"result"),$(a))throw new Error('Programming error: expression structure contain "string" in "parseSymbols" function');return a}Q(r);var c=W(i);if(c){if("open"===c.getType()){var u=e(t,n+1,r+1);if(Array.isArray(u))return u;var o=u.index,s=u.parenthesisPairFinder,l=u.exprStructure,p=C.changeItemsOnItem(a,l,n-1);return e(t,o+1,s,p)}if("close"===c.getType())return Q(r,"onClose"),{symbols:t,index:n,parenthesisPairFinder:r-1,exprStructure:a}}var f=H(i);if(f){var h=f.getMathCorrectSymbol(),O=a.length-1,b=a.length>0,m=a[O],v=n+1,d=!!H(t[v]);if(b&&L(Number.parseFloat(m.toString()))){var j=m+h,y=a.slice(0,O);return e(t,n+1,r,d?[].concat(Object(S.a)(y),[j]):[].concat(Object(S.a)(y),[Number.parseFloat(j)]))}return e(t,n+1,r,d?[].concat(Object(S.a)(a),[h]):[].concat(Object(S.a)(a),[Number.parseFloat(h)]))}var x=V(i);if(x)return e(t,n+1,r,[].concat(Object(S.a)(a),[x]));throw new Error('Unknown symbol: " '.concat(i,' "'))},te=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n!==t.length){var r=t[n];Array.isArray(r)?e(r):(L(r)||r.parseCheck(t,n),e(t,n+1))}},ne=function(e){var t=ee(e.split(""));if(!Array.isArray(t))throw new Error('Programming error: expression structure is not an array in "parseSymbols" function');return te(t),t},re={expr:[],index:0,maxPriority:-1,maxPriorityOperationIndex:null},ae=function e(t){var n=function(e){return Object.entries(re).reduce((function(t,n){var r=Object(s.a)(n,2),a=r[0],i=r[1];return"undefined"===typeof e[a]?Object(o.a)(Object(o.a)({},t),{},Object(u.a)({},a,i)):Object(o.a)(Object(o.a)({},t),{},Object(u.a)({},a,e[a]))}),{expr:e.expr})}(t),r=n.expr,a=n.index,i=n.maxPriority,c=n.maxPriorityOperationIndex;if("undefined"===typeof a||"undefined"===typeof i||"undefined"===typeof c)throw new Error('Programming error: default values didn\'t set in "calculateExpr" function');if(0===r.length)return 0;if(1===r.length){if(r[0]instanceof R)throw new Error('Programming error: expected a number but got an operation in "calculateExpr" function');return r[0]}if(a===r.length&&L(c)){var l=r[c];if(!(l instanceof R))throw new Error('Programming error: the number took for the operation in "calculateExpr" function');if(l.hasOwnFullCalculateFunc)return e({expr:l.calculate({expr:r,calculateExpr:e,operationIndex:c}),index:0});var p=c-1,f=p>=0&&L(r[p]),h=f?r[p]:null,O=c+1,b=O<a&&L(r[O]),m=b?r[O]:null,v=l.calculate({leftArg:h,rightArg:m}),d=Object(s.a)(v,1)[0],j=f?p-1:p,y=b?O+1:O;return e({expr:C.changeItemsOnItem(r,d,j,y),index:0})}var x=r[a];if(L(x))return e({expr:r,index:a+1,maxPriority:i,maxPriorityOperationIndex:c});var g=x.priority;return e(g>i?{expr:r,index:a+1,maxPriority:g,maxPriorityOperationIndex:a}:{expr:r,index:a+1,maxPriority:i,maxPriorityOperationIndex:c})},ie=function e(t){if(L(t))return t;var n=t.map((function(t){return Array.isArray(t)?e(t):t}));return ae({expr:n})},ce=function(e){try{var t=ne(e);return ie(t).toString().split("").map((function(e){return"."===e?",":e})).reduce((function(e,t){return"".concat(e).concat(t)}))}catch(n){throw n}},ue=new A("="),oe=new A("C"),se="calcReducer/SET_INPUT",le="calcReducer/ADD_SYMBOL",pe="calcReducer/CLEAN",fe="calcReducer/CALCULATE",he="calcReducer/DELETE_LAST_SYMBOL",Oe={input:"",expression:null,numbersInputs:G,defaultOperations:{clean:oe,calculate:ue},parenthesesOperations:B,calcOperations:M,error:null},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(o.a)(Object(o.a)({},e),t.payload);case le:return Object(o.a)(Object(o.a)({},e),{},{input:"".concat(e.input).concat(t.symbol)});case pe:return Object(o.a)(Object(o.a)({},e),{},{input:"",expression:null,error:null});case he:return Object(o.a)(Object(o.a)({},e),{},{input:e.input.slice(0,e.input.length-1)});case fe:try{var n=e.input,r=ce(n);return Object(o.a)(Object(o.a)({},e),{},{input:r,expression:n,error:null})}catch(a){return Object(o.a)(Object(o.a)({},e),{},{error:a.message})}default:return e}},me=n(16),ve=function(e){return e.calc.input},de=function(e){return e.calc.expression},je=function(e){return e.calc.error},ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return{symbol:e,exSymbols:t,funcName:n||"addSymbol",isInvert:r}},xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce((function(e,n){var r=Object(s.a)(n,2),a=r[0],i=r[1];return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},a,ye(i.getSymbol(),i.getExSymbols(),t[a]?t[a].funcName:null,t[a]?t[a].isInvert:null)))}),{})},ge=Object(me.a)((function(e){return e.calc.numbersInputs}),(function(e){return xe(e)})),Ee=Object(me.a)((function(e){return e.calc.parenthesesOperations}),(function(e){return xe(e)})),we=Object(me.a)((function(e){return e.calc.defaultOperations}),(function(e){return xe(e,{clean:{funcName:"clean"},calculate:{funcName:"calculate",isInvert:!0}})})),ke=Object(me.a)((function(e){return e.calc.calcOperations}),(function(e){return xe(e)})),_e=n(19),Ne=Object(_e.a)({calc:be}),Ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||_e.b,Ie=Object(_e.c)(Ne,Ae()),Pe=function(e,t){return Object.entries(e).reduce((function(e,n){var r=Object(s.a)(n,2),a=r[0],i=r[1],c=Object.entries(t).find((function(e){return Object(s.a)(e,1)[0]===i.funcName}))[1],l=Object(o.a)(Object(o.a)({},i),{},{func:c});return Object(o.a)(Object(o.a)({},e),{},Object(u.a)({},a,l))}),{})},Be=function(e,t){return Object.values(t).forEach((function(t){return t.symbol===e||t.exSymbols.includes(e)?t.func(t.symbol):null}))},Se=Object(l.b)((function(e){return{inputVal:ve(e),expression:de(e),error:je(e),numbersInputs:ge(e),parenthesesOperations:Ee(e),defaultOperations:we(e),calcOperations:ke(e)}}),(function(e){return{setInput:function(t){return e({type:se,payload:{input:t}})},inputFuncs:{addSymbol:function(t){return e(function(e){return{type:le,symbol:e}}(t))},calculate:function(){return e({type:fe})},clean:function(){return e({type:pe})},deleteLastSymbol:function(){return e({type:he})}}}}))((function(e){var t=function(e,t,n,r,a){var i=Pe(e,a),c=i.clean,u=i.calculate,o=Pe(r,a),s=o.openParenthesis,l=o.closeParenthesis,p=Pe(t,a),f=p.addition,h=p.division,O=p.multiplication,b=p.percent,m=p.squareRoot,v=p.subtraction,d=Pe(n,a),j=d.zero,y=d.one,x=d.two,g=d.three,E=d.four,w=d.five,k=d.six;return[[c,m,b],[h,O,v,f,u],[d.seven,d.eight,d.nine,E,w,k,g,x,y,d.doubleZero,j,d.comma],[s,l]]}(e.defaultOperations,e.calcOperations,e.numbersInputs,e.parenthesesOperations,e.inputFuncs),n=Object(s.a)(t,4),i=n[0],c=n[1],u=n[2],o=n[3],l=a.a.createRef(),p=function(t){"Enter"!==t.key?t.currentTarget===t.target?"Backspace"!==t.key?(Be(t.key,i),Be(t.key,c),Be(t.key,u),Be(t.key,o)):e.inputFuncs.deleteLastSymbol():t.stopPropagation():e.inputFuncs.calculate()};return Object(r.useEffect)((function(){var e=l.current;return e.focus(),e.addEventListener("keydown",p),function(){e.removeEventListener("keydown",p)}}),[]),Object(v.jsx)("div",{ref:l,className:f.a.app__wrapper,tabIndex:1,children:Object(v.jsx)("div",{className:f.a.app,children:Object(v.jsx)("div",{className:f.a.app__background,children:Object(v.jsxs)("div",{className:f.a.app__container,children:[Object(v.jsx)(E,{expression:e.expression,inputVal:e.inputVal,error:e.error,onInputChange:function(t){return e.setInput(t.currentTarget.value)}}),Object(v.jsx)(y,{numbersInputsBlockOpers:u,topLineBlockOpers:i,rightColumnBlockOpers:c})]})})})})})),Ce=function(){return Object(v.jsx)(l.a,{store:Ie,children:Object(v.jsx)(Se,{})})};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(Ce,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e46c680d.chunk.js.map