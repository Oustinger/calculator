(this.webpackJsonpcalculator=this.webpackJsonpcalculator||[]).push([[0],{12:function(e,t,n){e.exports={input:"Input_input__TRnYi",topLine:"Input_topLine__3GNZu",rightLine:"Input_rightLine__20Wr-",numbersInputs:"Input_numbersInputs__fFy6X",button:"Input_button__1-Hk5",invert:"Input_invert__ydKL6"}},13:function(e,t,n){e.exports={app__wrapper:"App_app__wrapper__2KVRR",app:"App_app__1Qq_3",app__background:"App_app__background__1vfeK",app__container:"App_app__container__2yYAg"}},15:function(e,t,n){e.exports={output:"Output_output__1fJgL",error:"Output_error__1O_Kj",input:"Output_input__3VUJf"}},28:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(16),c=n.n(i),o=(n(28),n(10)),u=n(2),l=n(11),s=n(22),p=n(13),f=n.n(p),b=n(23),O=n.n(b),h=n(12),d=n.n(h),m=n(1),v=function(e){var t=e.symbol,n=e.func,r=e.isInvert;return Object(m.jsx)("div",{"data-symbol":t,className:O()(d.a.button,Object(o.a)({},d.a.invert,r)),onClick:function(e){return n(e.currentTarget.dataset.symbol)},children:t})},j=function(e){return Object(m.jsx)(v,Object(u.a)({},e),e.symbol)},g=function(e){var t=e.topLineBlockOpers,n=e.rightColumnBlockOpers,r=e.numbersInputsBlockOpers;return Object(m.jsxs)("div",{className:d.a.input,children:[Object(m.jsx)("div",{className:d.a.topLine,children:t.map(j)}),Object(m.jsx)("div",{className:d.a.rightLine,children:n.map(j)}),Object(m.jsx)("div",{className:d.a.numbersInputs,children:r.map(j)})]})},x=n(15),y=n.n(x),w=function(e){var t=e.expression,n=e.inputVal,r=e.error,a=e.onInputChange;return Object(m.jsxs)("div",{className:y.a.output,children:[Object(m.jsx)("div",{className:y.a.expression,children:t}),Object(m.jsx)("input",{className:y.a.input,value:n,onChange:a}),Object(m.jsx)("span",{className:y.a.error,children:r})]})},A=n(18),I=n(8),P={changeItemsOnItem:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n+2;return[].concat(Object(I.a)(e.slice(0,n+1)),[t],Object(I.a)(e.slice(r)))}},E=function(e){return"number"===typeof e&&isFinite(e)},_=n(3),k=n(4),N=n(6),B=n(5),S=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(_.a)(this,e),this.symbol=t,this.exSymbols=n,this.symbol=t,this.exSymbols=n}return Object(k.a)(e,[{key:"getSymbol",value:function(){return this.symbol}},{key:"getExSymbols",value:function(){return this.exSymbols}},{key:"getMathCorrectSymbol",value:function(){return this.symbol}},{key:"checkIsOperation",value:function(e){return this.symbol===e||this.exSymbols.includes(e)}}]),e}(),V=function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(e,r,a,i){var c,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(_.a)(this,n),(c=t.call(this,r,o)).operationName=e,c.symbol=r,c.priority=a,c.validators=i,c.exSymbols=o,c.canBePlacedAfterOtherOperation=!1,c.canBePlacedBeforeOtherOperation=!1,c.hasOwnFullCalculateFunc=!1,c.operationName=e,c.priority=a,c.validators=i,c}return Object(k.a)(n,[{key:"validate",value:function(e,t){var n=this;this.validators.forEach((function(r){return r.check(n,e,t)}))}},{key:"calculate",value:function(e){return[0]}}]),n}(S),C=function(e){var t=e.operationValidateAPI,n=e.prevExprElemValidateAPI,r=e.nextExprElemValidateAPI;if(!n.isExist&&!r.isExist||!(n.isNumber||t.canBePlacedAfterOtherOperation||r.isExist&&r.isInstanceofCalcOperation&&r.canBePlacedBeforeOtherOperation||r.isNumber||t.canBePlacedBeforeOtherOperation||r.isExist&&r.isInstanceofCalcOperation&&r.canBePlacedAfterOtherOperation))throw new Error("Arguments for ".concat(t.operationName," not found"))},F=function(e){return e instanceof V},L=function(){function e(t){Object(_.a)(this,e),this.checkMethod=void 0,this.checkMethod=t}return Object(k.a)(e,[{key:"check",value:function(e,t,n){this.checkMethod({operationValidateAPI:this.getOperationValidateAPI(e),leftNumValidateAPI:this.getLeftNumValidateAPI(t,n),rightNumValidateAPI:this.getRightNumValidateAPI(t,n),prevExprElemValidateAPI:this.getPrevExprElemValidateAPI(t,n),nextExprElemValidateAPI:this.getNextExprElemValidateAPI(t,n)})}},{key:"getOperationValidateAPI",value:function(e){return{operationName:e.operationName,canBePlacedAfterOtherOperation:e.canBePlacedAfterOtherOperation,canBePlacedBeforeOtherOperation:e.canBePlacedBeforeOtherOperation}}},{key:"getLeftNumValidateAPI",value:function(e,t){var n=t-1,r=n>=0&&E(e[n]),a={isExist:r};if(r){var i=e[n];E(i)&&(a.number=i)}return a}},{key:"getRightNumValidateAPI",value:function(e,t){var n=t+1,r=n<e.length&&E(e[n]),a={isExist:r};if(r){var i=e[n];E(i)&&(a.number=i)}return a}},{key:"getPrevExprElemValidateAPI",value:function(e,t){var n=t-1,r=n>=0,a={isExist:r};if(r){var i=e[n],c=F(i);a.isNumber=E(i),a.isInstanceofCalcOperation=c,F(i)&&(a.canBePlacedBeforeOtherOperation=i.canBePlacedBeforeOtherOperation,a.canBePlacedAfterOtherOperation=i.canBePlacedAfterOtherOperation)}return a}},{key:"getNextExprElemValidateAPI",value:function(e,t){var n=t+1,r=n<e.length,a={isExist:r};if(r){var i=e[n],c=F(i);a.isNumber=E(i),a.isInstanceofCalcOperation=c,F(i)&&(a.canBePlacedBeforeOtherOperation=i.canBePlacedBeforeOtherOperation,a.canBePlacedAfterOtherOperation=i.canBePlacedAfterOtherOperation)}return a}}]),e}(),T=function(e){var t=e.operationValidateAPI,n=e.prevExprElemValidateAPI,r=e.nextExprElemValidateAPI;if(n.isExist&&n.isInstanceofCalcOperation&&!n.canBePlacedBeforeOtherOperation&&!t.canBePlacedAfterOtherOperation||r.isExist&&r.isInstanceofCalcOperation&&!r.canBePlacedAfterOtherOperation&&!t.canBePlacedBeforeOtherOperation)throw new Error("The ".concat(t.operationName," cannot be performed before other operation"))},M=function(e){if(0===e.rightNumValidateAPI.number)throw new Error("You cannot divide by zero")},R=function(e){var t=e.operationValidateAPI;if(e.rightNumValidateAPI.isExist)throw new Error("The ".concat(t.operationName," operation mustn't has a number on the right"))},q=function(e){var t=e.operationValidateAPI;if(e.leftNumValidateAPI.isExist)throw new Error("The ".concat(t.operationName," operation mustn't has any number on the left"))},J=function(e){var t=e.operationValidateAPI;if(!e.rightNumValidateAPI.isExist)throw new Error("The ".concat(t.operationName," operation need an argument on the right"))},K={addition:new(function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculate",value:function(e){return[(null!==e.leftArg?e.leftArg:0)+(null!==e.rightArg?e.rightArg:0)]}}]),n}(V))("addition","+",0,[new L(C),new L(T)]),division:new(function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculate",value:function(e){return[(null!==e.leftArg?e.leftArg:1)/(null!==e.rightArg?e.rightArg:1)]}}]),n}(V))("division","/",1,[new L(C),new L(T),new L(M)]),multiplication:new(function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculate",value:function(e){return[(null!==e.leftArg?e.leftArg:1)*(null!==e.rightArg?e.rightArg:1)]}}]),n}(V))("multiplication","\xd7",1,[new L(C),new L(T)],["*"]),percent:new(function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(_.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).canBePlacedBeforeOtherOperation=!0,e.hasOwnFullCalculateFunc=!0,e}return Object(k.a)(n,[{key:"calculate",value:function(e){var t=e.expr,n=e.calculateExpr,r=e.operationIndex;if(!(1<=r&&r<=3)){var a=r-2,i=[n({expr:t.slice(0,a),index:0})].concat(Object(I.a)(t.slice(a)));return this.calculate({expr:i,calculateExpr:n,operationIndex:3})}var c=r-3,o=c>=0?t[c]:1,u=r-1,l=t[u];if(E(o)&&E(l)){var s=o/100*l;return P.changeItemsOnItem(t,s,u-1,r+1)}throw new Error("Some of percent operation arguments is not a number")}}]),n}(V))("percent","%",2,[new L(C),new L(R)]),squareRoot:new(function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(_.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).canBePlacedAfterOtherOperation=!0,e.canBePlacedBeforeOtherOperation=!0,e}return Object(k.a)(n,[{key:"calculate",value:function(e){var t=null!==e.leftArg?e.leftArg:1,n=null!==e.rightArg?e.rightArg:1;return[t*Math.pow(n,.5)]}}]),n}(V))("square root","\u221a",2,[new L(C),new L(J),new L(q)]),subtraction:new(function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"calculate",value:function(e){return[(null!==e.leftArg?e.leftArg:0)-(null!==e.rightArg?e.rightArg:0)]}}]),n}(V))("subtraction","-",0,[new L(C),new L(T)])},z=function(e){return Object.values(K).find((function(t){return t.checkIsOperation(e)}))},Y=new S("8"),Z=new S("5"),H=new S("4"),U=new S("9"),D=new S("1"),G=new S("7"),Q=new S("6"),W=new S("3"),X=new S("2"),$=new S("0"),ee={zero:$,one:D,two:X,three:W,four:H,five:Z,six:Q,seven:G,eight:Y,nine:U,doubleZero:new(function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(_.a)(this,n),(r=t.call(this,e.reduce((function(e,t){return"".concat(e).concat(t.getSymbol())}),""),a)).symbols=e,r.exSymbols=a,r}return n}(S))([$,$]),comma:new(function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"getMathCorrectSymbol",value:function(){return this.exSymbols[0]}}]),n}(S))(",",["."])},te=function(e){return Object.values(ee).find((function(t){return t.checkIsOperation(e)}))},ne=function(e){Object(N.a)(n,e);var t=Object(B.a)(n);function n(e,r){var a;return Object(_.a)(this,n),(a=t.call(this,e)).symbol=e,a.type=r,a.type=r,a}return Object(k.a)(n,[{key:"getType",value:function(){return this.type}}]),n}(S),re=new ne(")","close"),ae={openParenthesis:new ne("(","open"),closeParenthesis:re},ie=function(e){return Object.values(ae).find((function(t){return t.checkIsOperation(e)}))},ce=function e(t){return!!Array.isArray(t)&&t.reduce((function(t,n){return!!(E(n)||F(n)||e(n)||0===n.length)||t}),!1)},oe=function(e,t){var n="Some parenthesis pair not found";switch(t){case"result":if(0!==e)throw new Error(n);break;case"onClose":if(!(e>0))throw new Error(n);break;default:if(e<0)throw new Error(n)}};function ue(e){return!!e.find((function(e){return e instanceof Array?ue(e):"string"===typeof e}))}var le=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=t[n];if(!i){if(0===n)throw new Error("First write the expression");if(oe(r,"result"),ue(a))throw new Error('Programming error: expression structure contain "string" in "parseSymbols" function');return a}oe(r);var c=ie(i);if(c){if("open"===c.getType()){var o=e(t,n+1,r+1);if(ce(o))return o;var u=o.index,l=o.parenthesisPairFinder,s=o.exprStructure,p=P.changeItemsOnItem(a,s,n-1);return e(t,u+1,l,p)}if("close"===c.getType())return oe(r,"onClose"),{symbols:t,index:n,parenthesisPairFinder:r-1,exprStructure:a}}var f=te(i);if(f){var b=f.getMathCorrectSymbol(),O=a.length-1,h=a.length>0,d=a[O],m=n+1,v=!!te(t[m]);if(h&&E(Number.parseFloat(d.toString()))){var j=d+b,g=a.slice(0,O);return e(t,n+1,r,v?[].concat(Object(I.a)(g),[j]):[].concat(Object(I.a)(g),[Number.parseFloat(j)]))}return e(t,n+1,r,v?[].concat(Object(I.a)(a),[b]):[].concat(Object(I.a)(a),[Number.parseFloat(b)]))}var x=z(i);if(x)return e(t,n+1,r,[].concat(Object(I.a)(a),[x]));throw new Error('Unknown symbol: " '.concat(i,' "'))},se=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n!==t.length){var r=t[n];ce(r)?e(r):(F(r)&&r.validate(t,n),e(t,n+1))}},pe=function(e){var t=le(e.split(""));if(!ce(t))throw new Error('Programming error: expected an expression structure but received parse function "parseSymbols" function');return se(t),t},fe={expr:[],index:0,maxPriority:-1,maxPriorityOperationIndex:null},be=function e(t){var n=Object(u.a)(Object(u.a)({},fe),t),r=n.expr,a=n.index,i=n.maxPriority,c=n.maxPriorityOperationIndex;if("undefined"===typeof a||"undefined"===typeof i||"undefined"===typeof c)throw new Error('Programming error: default values didn\'t set in "calculateExpr" function');if(0===r.length)return 0;if(1===r.length){if(r[0]instanceof V)throw new Error('Programming error: expected a number but got an operation in "calculateExpr" function');return r[0]}if(a===r.length&&E(c)){var o=r[c];if(!(o instanceof V))throw new Error('Programming error: the number took for the operation in "calculateExpr" function');if(o.hasOwnFullCalculateFunc)return e({expr:o.calculate({expr:r,calculateExpr:e,operationIndex:c}),index:0});var s=c-1,p=s>=0&&E(r[s]),f=p?r[s]:null,b=c+1,O=b<a&&E(r[b]),h=O?r[b]:null,d=o.calculate({leftArg:f,rightArg:h}),m=Object(l.a)(d,1)[0],v=p?s-1:s,j=O?b+1:b;return e({expr:P.changeItemsOnItem(r,m,v,j),index:0})}var g=r[a];if(E(g))return e({expr:r,index:a+1,maxPriority:i,maxPriorityOperationIndex:c});var x=g.priority;return e(x>i?{expr:r,index:a+1,maxPriority:x,maxPriorityOperationIndex:a}:{expr:r,index:a+1,maxPriority:i,maxPriorityOperationIndex:c})},Oe=function e(t){if(E(t))return t;var n=t.map((function(t){return ce(t)?e(t):t}));return be({expr:n})},he=function(e){try{var t=pe(e);return Oe(t).toString().split("").map((function(e){return"."===e?",":e})).reduce((function(e,t){return"".concat(e).concat(t)}))}catch(n){throw n}},de=new S("="),me=new S("C"),ve={input:"",expression:null,numbersInputs:ee,defaultOperations:{clean:me,calculate:de},parenthesesOperations:ae,calcOperations:K,error:null},je=Object(A.b)({name:"calc",initialState:ve,reducers:{setInputAction:function(e,t){return Object(u.a)(Object(u.a)({},e),t.payload)},addSymbolAction:function(e,t){return Object(u.a)(Object(u.a)({},e),{},{input:"".concat(e.input).concat(t.payload?t.payload.symbol:"")})},calculateAction:function(e){try{var t=e.input,n=he(t);return Object(u.a)(Object(u.a)({},e),{},{input:n,expression:t,error:null})}catch(r){return Object(u.a)(Object(u.a)({},e),{},{error:r.message})}},cleanAction:function(e){return Object(u.a)(Object(u.a)({},e),{},{input:"",expression:null,error:null})},deleteLastSymbolAction:function(e){return Object(u.a)(Object(u.a)({},e),{},{input:e.input.slice(0,e.input.length-1)})}}}),ge=je.actions,xe=ge.setInputAction,ye=ge.addSymbolAction,we=ge.calculateAction,Ae=ge.cleanAction,Ie=ge.deleteLastSymbolAction,Pe=je.reducer,Ee=n(9),_e=function(e){return e.calc.input},ke=function(e){return e.calc.expression},Ne=function(e){return e.calc.error},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce((function(e,n){var r=Object(l.a)(n,2),a=r[0],i=r[1];return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},a,{symbol:i.getSymbol(),exSymbols:i.getExSymbols(),funcName:t[a]?t[a].funcName:"addSymbol",isInvert:!!t[a]&&t[a].isInvert}))}),{})},Se=Object(Ee.a)((function(e){return e.calc.numbersInputs}),(function(e){return Be(e)})),Ve=Object(Ee.a)((function(e){return e.calc.parenthesesOperations}),(function(e){return Be(e)})),Ce=Object(Ee.a)((function(e){return e.calc.defaultOperations}),(function(e){return Be(e,{clean:{funcName:"clean"},calculate:{funcName:"calculate",isInvert:!0}})})),Fe=Object(Ee.a)((function(e){return e.calc.calcOperations}),(function(e){return Be(e)})),Le=n(7),Te=Object(Le.b)({calc:Pe}),Me=Object(A.a)({reducer:Te}),Re=function(e,t){return Object.entries(e).reduce((function(e,n){var r=Object(l.a)(n,2),a=r[0],i=r[1],c=Object.entries(t).find((function(e){return Object(l.a)(e,1)[0]===i.funcName}));if(!c)throw new Error('Programming error: input function not found in "setFunctions" function');var s=c[1],p=Object(u.a)(Object(u.a)({},i),{},{func:s});return Object(u.a)(Object(u.a)({},e),{},Object(o.a)({},a,p))}),{})},qe=function(e,t){return Object.values(t).forEach((function(t){return t.symbol===e||t.exSymbols.includes(e)?t.func(t.symbol):null}))},Je=Object(s.b)((function(e){return{inputVal:_e(e),expression:ke(e),error:Ne(e),numbersInputs:Se(e),parenthesesOperations:Ve(e),defaultOperations:Ce(e),calcOperations:Fe(e)}}),(function(e){return{setInput:function(t){return e(xe({input:t}))},inputFuncs:{addSymbol:function(t){return!!t&&e(function(e){return ye({symbol:e})}(t))},calculate:function(){return e(we())},clean:function(){return e(Ae())},deleteLastSymbol:function(){return e(Ie())}}}}))((function(e){var t=function(e,t,n,r,a){var i=Re(e,a),c=i.clean,o=i.calculate,u=Re(r,a),l=u.openParenthesis,s=u.closeParenthesis,p=Re(t,a),f=p.addition,b=p.division,O=p.multiplication,h=p.percent,d=p.squareRoot,m=p.subtraction,v=Re(n,a),j=v.zero,g=v.one,x=v.two,y=v.three,w=v.four,A=v.five,I=v.six;return[[c,d,h],[b,O,m,f,o],[v.seven,v.eight,v.nine,w,A,I,y,x,g,v.doubleZero,j,v.comma],[l,s]]}(e.defaultOperations,e.calcOperations,e.numbersInputs,e.parenthesesOperations,e.inputFuncs),n=Object(l.a)(t,4),a=n[0],i=n[1],c=n[2],o=n[3],s=Object(r.createRef)(),p=function(t){"Enter"!==t.key?t.currentTarget===t.target?"Backspace"!==t.key?(qe(t.key,a),qe(t.key,i),qe(t.key,c),qe(t.key,o)):e.inputFuncs.deleteLastSymbol():t.stopPropagation():e.inputFuncs.calculate()};Object(r.useEffect)((function(){var e=s.current;if(null===e)throw new Error('Programming error: app wrapper ref element is null but expected HTMLDivElement in "AppComponent"');return e.focus(),e.addEventListener("keydown",p),function(){e.removeEventListener("keydown",p)}}),[]);var b={expression:e.expression,inputVal:e.inputVal,error:e.error,onInputChange:function(t){t.currentTarget&&e.setInput(t.currentTarget.value)}};return Object(m.jsx)("div",{ref:s,className:f.a.app__wrapper,tabIndex:1,children:Object(m.jsx)("div",{className:f.a.app,children:Object(m.jsx)("div",{className:f.a.app__background,children:Object(m.jsxs)("div",{className:f.a.app__container,children:[Object(m.jsx)(w,Object(u.a)({},b)),Object(m.jsx)(g,{numbersInputsBlockOpers:c,topLineBlockOpers:a,rightColumnBlockOpers:i})]})})})})})),Ke=function(){return Object(m.jsx)(s.a,{store:Me,children:Object(m.jsx)(Je,{})})};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(Ke,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.a4a6d4ff.chunk.js.map